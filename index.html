<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>HTML & JS</title>
    <link rel="stylesheet" href="css/issue-form-style.css">
    <link rel="stylesheet" href="css/issues-list-style.css">
    <link rel="stylesheet" href="font-awesome-4.7.0\css\font-awesome.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascript/disable_add.js"></script>
    <script type="text/javascript" src="javascript/Issues_List.js"></script>
    <script type="text/javascript" src="javascript/issue_box.js"></script>
    <script type="text/javascript" src="javascript/order_issues_button.js"></script>
    <script type="text/javascript" src="javascript/change_background_color.js"></script>
</head>

<body id="background">
    <div class="container justify-content-center font-weight-bold font-16">
        <div class="row header my-3 mr-4">
            <span class="col-11">
                Issue Tracker Application
            </span>
            <span class="col-1">
                <button type="button" class="btn btn-dark btn-sm button-title font-weight-bold font-16"
                    onclick="change_background_color(document.getElementById('background'))">
                    color</button>
            </span>
        </div>
        <form class="rounded primary-color col-12 p-4">
            <div class="row form-title px-4 pb-lg-4 pb-md-4 pb-sm-3 pb-3">Add New Issue:</div>
            <div class="row px-4 mb-sm-1 mb-1 mb-lg-2 mb-md-2">Description</div>
            <div class="row px-4 mb-lg-3 mb-md-3 mb-sm-2 mb-2">
                <input type="text" class="border rounded pl-2 w-100 input-text font-16" id="description"
                    placeholder="Describe the issue ..." oninput="disable_add(document.getElementById('add_button'),
                    document.getElementById('description'),document.getElementById('assignedTo'))" />
            </div>
            <div class="row px-4 mb-sm-1 mb-1 mb-lg-2 mb-md-2">Severity</div>
            <div class="row px-4 mb-lg-3 mb-md-3 mb-sm-2 mb-2">
                <select class="input-text border custom-select custom-select-sm pl-2 w-100 font-16" id="severity">
                    <option value="1">Low</option>
                    <option value="2">Medium</option>
                    <option value="3">High</option>
                </select>
            </div>
            <div class="row px-4 mb-sm-1 mb-1 mb-lg-2 mb-md-2">Assigned To</div>
            <div class="row px-4 mb-lg-4 mb-md-4 mb-sm-3 mb-3">
                <input type="text" class="border rounded pl-2 w-100 input-text font-16" id="assignedTo"
                    placeholder="Enter responsible ..." oninput="disable_add(document.getElementById('add_button'),
                    document.getElementById('description'),document.getElementById('assignedTo'))" onkeypress="return (event.charCode > 64 && event.charCode < 91) || 
                    (event.charCode > 96 && event.charCode < 123) || (event.charCode==32)" />
            </div>
            <div class="row px-4"><button id="add_button" type="button"
                    class="btn btn-primary button-title font-weight-bold font-16" disabled onclick="
                    Issues_List.addIssue(document.getElementById('description'),
                    document.getElementById('severity'),document.getElementById('assignedTo'),
                    document.getElementById('issues_area'));disable_add(document.getElementById('add_button'),
                    document.getElementById('description'),document.getElementById('assignedTo'))" onmouseover="check_duplication(document.getElementById('description').value,
                    document.getElementById('severity').value,document.getElementById('assignedTo').value,
                    document.getElementById('add_button'))">Add</button>
            </div>
        </form>
        <div class="my-4 px-4">
            <div class="rounded secondary-color mb-3 issues-area" id="issues_area">
                <script>
                    let issues = JSON.parse(window.localStorage.getItem('issues_list'));
                    if (issues.length) {
                        document.getElementById("issues_area").innerHTML = '<div class="pt-4 p-3">' +
                            '<button type = "button" class="btn btn-secondary btn-sm button-title font-weight-bold"' +
                            'onclick = "Issues_List.orderIssues()" >' +
                            'order Issues</button >' +
                            '</div > ';
                    }
                    for (let i = 0; i < issues.length; i++) {
                        let enabled = issues[i].status == "open" ? "" : "disabled";
                        document.getElementById("issues_area").innerHTML += '<div class="mb-4 px-3">' +
                            '<div class="row issue-id px-3 mb-2">Issue ID: ' + issues[i].ID + '</div>' +
                            '<div class="row issue-id px-3 mb-2">' +
                            '<button type="button" class="btn btn-info btn-sm px-1 py-0 button-title font-weight-bold" disabled>' +
                            issues[i].status + '</button></div>' +
                            '<div class="row form-title px-3 mb-2">' + issues[i].description + '</div>' +
                            '<div class="mb-2 issue-id"><i class="fa fa-history mr-1"></i>' + issues[i].severity + '</div>' +
                            '<div class="mb-2 issue-id"><i class="fa fa-user mr-1"></i>' + issues[i].assignedTo + '</div>' +
                            '<div class="mb-2 issue-id"><i class="fa fa-calendar mr-1"></i>' + issues[i].date_time + '</div>' +
                            '<div class="row issue-id px-3 mb-2">' +
                            '<button type="button" class="btn btn-warning btn-sm mr-1 white-font button-title font-weight-bold"' +
                            'id="' + issues[i].number + '" onclick="Issues_List.callClose(' + issues[i].number + ');"' +
                            enabled + '>Close</button>' +
                            '<button type="button" class="btn btn-danger btn-sm button-title font-weight-bold"' +
                            'id="' + issues[i].number + '" onclick="Issues_List.callDelete(' + issues[i].number + ')">Delete</button></div>' +
                            '</div>';;
                    }
                </script>
            </div>
        </div>
    </div>
</body>

</html>